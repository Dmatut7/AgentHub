# 窗口 A/B/C/D：执行规范（模板）

本规范给“窗口 A/B/C/D”使用。复制时将窗口标识固定为 A/B/C/D 之一。
目标是统一合并、管理冲突、完成跨模块接线与验收。

---

## 0. 文档引用（固定）
- 需求：`doc/15-需求规格与验收指标模板.md`
- 执行计划：`doc/14-执行计划模板.md`
- 接口规范：`doc/09-接口规范模板.md`
- 技术/规范：`doc/06-规范标准.md` / `doc/07-实现方案.md`
- 本窗口任务清单：`doc/窗口<窗口>-阶段<阶段>任务清单.md`
- 命名建议：`doc/窗口<窗口>-执行规范.md`

---

## 1. 任务范围（对应执行计划）

来源：`doc/<执行计划>.md`

**A/B/C/D 负责**
- ...

**A/B/C/D 不做**
- ...

---

## 1A. 任务清单锁定（必须）
- 任务清单未锁定前不得开工
- 任务清单更新后，已 REVIEW_OK 的窗口需重新确认

---

## 2. 文件所有权（允许修改）

**允许**
- `...`

**禁止**
- `...`

---

## 2.1 执行口径（必读）
- 不修改其他窗口负责的文件
- 不新增越界的公共协议
- 冲突必须回写到执行计划
- 修改共享入口/公共模块前必须先通知其他窗口
- 文档变更必须同步到相关引用（执行计划/任务清单/接口文档）

---

## 2.2 最近变更（必须读）
- ...

---

## 2.3 协作门禁（统一开工）
- A/B/C/D 全部 [REVIEW_OK] 前，任何窗口不得编码
- MAIN 统一发出 [START] 后方可开工
- 若文档变更，需重新 REVIEW_OK

---

## 2.4 审查重点（必须）
- 对照现有代码与接口，确认可落地
- 从用户体验检查功能是否完整（场景/状态/错误提示）
- 确保逻辑闭环（输入→处理→输出→验收）
- 接口对接是否清晰（Provider/Consumer/接口文档）
- 若任务分配明显不均衡，必须反馈 MAIN 调整
- 发现缺口必须回写文档或提问

---

## 3. 实现边界（避免冲突）
- ...

---

## 3A. 对外输出（交付给其他窗口）
- 输出接口/类型：...
- 输出组件/模块：...
- 接线窗口：A/B/C/D

---

## 4. 交付物（A/B/C/D 必须产出）
- ...

---

## 5. 风险与对策
- 风险：... / 对策：...

---

## 6. 验收清单（写死）
- ...

---

## 7. 与 A/B/C/D 的配合方式
- ...

---

## 7A. 合并顺序（固定）
- 依赖窗口先完成并输出接口/组件
- 本窗口仅在上游完成后接线/集成

---

## 8. 任务命名与日志
- 任务 ID 前缀：`S<阶段>-A-` / `S<阶段>-B-` / `S<阶段>-C-` / `S<阶段>-D-`
- 每次合并在 `doc/<执行计划>.md` 里记录状态

---

## 9. 变更记录与提交规则

### 9.1 变更记录（必须写）
变更记录模板：
- 日期：YYYY-MM-DD
- 任务：S<阶段>-A-<序号> / S<阶段>-B-<序号> / S<阶段>-C-<序号> / S<阶段>-D-<序号>
- 变更：做了什么
- 文件：修改的文件列表
- 测试：执行了哪些测试 / 未测试（原因）

### 9.2 何时本地提交
- 完成一个独立任务或 ChangeSet
- 解决冲突并通过基础测试
- 向其他窗口合并前或合并后
- 切换到另一个任务前

### 9.3 提交要求
- 不混入无关改动
- 必须在变更记录中写清“改了什么、测了什么”
- 测试未执行时必须标注原因

---

### 9.5 依赖检查表（Checklist，开工门禁）
开工前必须逐项确认，未通过不得开工：
- [ ] 关联需求文档存在且已确认（包含对应 `R<阶段>-<序号>`）
- [ ] 依赖的上游接口文档已锁定（版本/负责人确认，变更记录已更新）
- [ ] A/B/C/D 全部已 [REVIEW_OK]，MAIN 已发 [START]
- [ ] 任务清单已锁定（版本/日期已记录）

---

## 10. 开工步骤（不用再问，按此执行）

### 10.1 S<阶段>-A-1 <任务名>（B/C/D 同理）
1) ...
2) ...

### 10.1A S<阶段>-A-1 任务卡（详细）（B/C/D 同理）
**目标**
- ...

**文件清单（固定）**
- `...`

**必须输出的接口（最小集）**
- `...`

**验收点（写死）**
- ...

**风险点**
- ...

---

## 11. 交付前检查（必须通过）
- ...

---

## 12. 关键问题直答（必须按此执行）

### 12.1 数据存储与保留（必须写清）
- 介质：...
- 位置：...
- 保留：...

### 12.2 字段与枚举对齐（必须一致）
- 字段：...
- 枚举：...

### 12.3 状态与事件映射（必须）
- 状态流：...
- 事件触发：...

### 12.4 幂等/去重/顺序
- 幂等策略：...
- 去重规则：...
- 顺序保证：...

### 12.5 超时/重试/限流
- 超时：...
- 重试：...
- 限流：...

### 12.6 清理与归档策略
- 触发时机：...
- 清理范围：...

---

## 变更记录
- 日期：YYYY-MM-DD
- 任务：S<阶段>-A-<序号> / S<阶段>-B-<序号> / S<阶段>-C-<序号> / S<阶段>-D-<序号>
- 变更：...
- 文件：...
- 测试：...
