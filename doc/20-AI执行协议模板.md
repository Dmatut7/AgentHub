# AI 执行协议（v2.0）

本协议用于指导 AI 在协作项目中执行任务，确保遵守文档分级与 SSOT 原则。

---

## 1. 启动协议（必须）
- 接到任务后先阅读 `doc/19-文档裁剪指南模板.md`，判定等级 L1/L2/L3
- 按等级最小集执行，不得无脑填全套文档

---

## 2. 寻址协议（必须）
- 找需求：`doc/15-需求规格与验收指标模板.md`
- 找排期：`doc/14-执行计划模板.md`
- 找接口：`doc/09-接口规范模板.md`
- 严禁相信其他文档里复述的需求细节，只信 `doc/15-需求规格与验收指标模板.md`

---

## 2A. 需求澄清协议（MAIN 必须）
- 多轮沟通：每轮结束输出“需求快照”
- 草稿记录：写入 `doc/21-需求澄清草稿记录.md`
- 用户没想法时，必须给默认建议并让用户确认
- 确认后的需求迁移到 `doc/15-需求规格与验收指标模板.md`

---

## 2B. 协作开工门禁（统一）
- A/B/C/D 未全部 [REVIEW_OK] 前不得编码
- MAIN 统一发 [START] 后方可开工
- 文档有变更需重新 REVIEW_OK

---

## 2C. 子 AI 提问规则（必须）
- 发现不一致或缺口，先引用 SSOT 文档位置
- 无证据不执行，必须向 MAIN 提问
- 若任务文档缺少允许/禁止路径或技术指引，必须先补齐或提问

---

## 2D. 审查标准（必须）
- 对照现有代码与架构，确认任务可落地
- 从用户体验出发检查功能是否完整（场景/状态/错误提示）
- 确保逻辑闭环（输入→处理→输出→验收）
- 检查接口是否可对接（Provider/Consumer 是否对齐）
- 若任务分配明显失衡，必须提醒 MAIN 调整
- 发现缺口或冲突先提问，不得擅自假设

---

## 2E. 变更同步规则（必须）
- 需求/接口/执行计划/任务清单变更必须同步到所有引用文档
- MAIN 负责广播变更点，子 AI 重新 REVIEW_OK

---

## 3. 交付协议（必须）
- 提交代码前，必须检查 `doc/16-测试与发布模板.md` 的 Release Manifest
- 如有 Config/DB 变更，必须在 `doc/02-阶段任务总表模板.md` 标记 Yes

---

## 4. 结束语
本模板体系封版为 v2.0。
